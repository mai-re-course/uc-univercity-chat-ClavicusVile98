**Поиск по истории сообщений всех чатов и каналов**
* * *
**Акторы:** 

- Пользователь
- Приложение
- Бекенд
- База данных

**Цель:** пользователь использует возможность поиска материалов во всех чатах/каналах для того, чтобы найти необходимую ему информацию.

**Предусловие:** у пользователя есть аккаунт в приложении, пользователь зашел в приложение и авторизовался, наличие у пользователя как минимум одного чата/подписки как минимум на один канал, в чате/канале создан хотя бы один хештег.

**Сценарий:**

1. Пользователь пишет ключевое слово в строке поиска.
  Запускается сценарий [Поиск по истории сообщений одного пользователя], если в приложении открыта вкладка с чатом/каналом и
пользователь хочет начать поиск там.
2. Приложение отправляет ключевое слово из строки поиска в бекенд.
  Запускается сценарий [Поиск по хештегам], если в роли ключевого слова выступает хештег.
3. Бекенд отправляет запрос к базе данных для поиска строк, удовлетворяющих критерию.
4. База данных отправляет результат поиска обратно в бекенд.
5. Бекенд возвращает найденные сообщения/вложения.
6. Приложение показывает все сообщения/вложения из всех чатов/каналов, содержащие ключевое слово.
7. Пользователь выбирает нужное сообщение/вложение.
8. Приложение открывает вкладку с чатом/каналом.

**Результат:**

- В приложении открыта вкладка с чатом/каналом;
- Цветом выделено сообщение, удовлетворяющее критерию поиска.

**Исключения:**

- Отсутствие сообщений по искомому ключу;
- Пользователь не может просматривать сообщения;
- Ошибка при введение ключевого слова для поиска.

**Альтернативный сценарий:**

1.a. [Поиск по истории сообщений одного пользователя], если пользователь начинает поиск внутри чата/канала. 1.b. Пользователь вводит ключевые слова для поиска. 1.c. Возврат на шаг 2 основного сценария.

2.a. [Поиск по хештегам], если в поле поиска введен хештег. 2.b. Возврат к пункту 3 основного сценария.
